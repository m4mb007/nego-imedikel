<div class="container mx-auto px-4 py-8">
  <div class="mb-6">
    <%= link_to "← Back to Users", admin_users_path, 
        class: "text-blue-600 hover:text-blue-800 mb-4 inline-block" %>
  </div>

  <div class="bg-white rounded-lg shadow-lg overflow-hidden">
    <!-- User Header -->
    <div class="bg-gradient-to-r from-blue-500 to-purple-600 px-6 py-8 text-white">
      <div class="flex items-center">
        <div class="flex-shrink-0 h-20 w-20">
          <div class="h-20 w-20 rounded-full bg-white bg-opacity-20 flex items-center justify-center">
            <span class="text-white text-2xl font-bold"><%= @user.first_name.first.upcase %></span>
          </div>
        </div>
        <div class="ml-6">
          <h1 class="text-3xl font-bold"><%= @user.full_name %></h1>
          <p class="text-blue-100 mt-1"><%= @user.email %></p>
          <div class="flex items-center mt-4 space-x-4">
            <span class="px-3 py-1 bg-white bg-opacity-20 rounded-full text-sm">
              <%= @user.role.titleize %>
            </span>
            <span class="px-3 py-1 bg-white bg-opacity-20 rounded-full text-sm">
              <%= @user.status.titleize %>
            </span>
            <% if @user.verified? %>
              <span class="px-3 py-1 bg-green-500 bg-opacity-20 rounded-full text-sm">
                Verified
              </span>
            <% end %>
          </div>
        </div>
      </div>
    </div>

    <!-- User Details -->
    <div class="p-6">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <!-- Basic Information -->
        <div>
          <h2 class="text-xl font-semibold mb-4">User Information</h2>
          <dl class="space-y-3">
            <div>
              <dt class="text-sm font-medium text-gray-500">Full Name</dt>
              <dd class="text-sm text-gray-900"><%= @user.full_name %></dd>
            </div>
            <div>
              <dt class="text-sm font-medium text-gray-500">Email</dt>
              <dd class="text-sm text-gray-900"><%= @user.email %></dd>
            </div>
            <div>
              <dt class="text-sm font-medium text-gray-500">Phone</dt>
              <dd class="text-sm text-gray-900"><%= @user.phone %></dd>
            </div>
            <div>
              <dt class="text-sm font-medium text-gray-500">Role</dt>
              <dd class="text-sm text-gray-900"><%= @user.role.titleize %></dd>
            </div>
            <div>
              <dt class="text-sm font-medium text-gray-500">Status</dt>
              <dd class="text-sm text-gray-900"><%= @user.status.titleize %></dd>
            </div>
            <div>
              <dt class="text-sm font-medium text-gray-500">Verified</dt>
              <dd class="text-sm text-gray-900">
                <% if @user.verified? %>
                  <span class="text-green-600">✓ Yes</span>
                <% else %>
                  <span class="text-gray-500">No</span>
                <% end %>
              </dd>
            </div>
            <div>
              <dt class="text-sm font-medium text-gray-500">Member Since</dt>
              <dd class="text-sm text-gray-900"><%= @user.created_at.strftime("%B %d, %Y") %></dd>
            </div>
          </dl>
        </div>

        <!-- Store Information -->
        <div>
          <h2 class="text-xl font-semibold mb-4">Store Information</h2>
          <% if @user.has_store? %>
            <dl class="space-y-3">
              <div>
                <dt class="text-sm font-medium text-gray-500">Store Name</dt>
                <dd class="text-sm text-gray-900"><%= @user.store.name %></dd>
              </div>
              <div>
                <dt class="text-sm font-medium text-gray-500">Store Status</dt>
                <dd class="text-sm text-gray-900"><%= @user.store.status.titleize %></dd>
              </div>
              <div>
                <dt class="text-sm font-medium text-gray-500">Store Verified</dt>
                <dd class="text-sm text-gray-900">
                  <% if @user.store.verified? %>
                    <span class="text-green-600">✓ Yes</span>
                  <% else %>
                    <span class="text-gray-500">No</span>
                  <% end %>
                </dd>
              </div>
            </dl>
          <% else %>
            <p class="text-gray-500">No store associated with this user.</p>
          <% end %>
        </div>
      </div>

      <!-- Statistics -->
      <div class="mt-8">
        <h2 class="text-xl font-semibold mb-4">User Statistics</h2>
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
          <div class="bg-gray-50 rounded-lg p-4">
            <div class="text-2xl font-bold text-blue-600"><%= @user.orders.count %></div>
            <div class="text-sm text-gray-500">Total Orders</div>
          </div>
          <div class="bg-gray-50 rounded-lg p-4">
            <div class="text-2xl font-bold text-green-600"><%= @user.products.count %></div>
            <div class="text-sm text-gray-500">Total Products</div>
          </div>
          <div class="bg-gray-50 rounded-lg p-4">
            <div class="text-2xl font-bold text-purple-600"><%= @user.reviews.count %></div>
            <div class="text-sm text-gray-500">Total Reviews</div>
          </div>
          <div class="bg-gray-50 rounded-lg p-4">
            <div class="text-2xl font-bold text-orange-600"><%= @user.cart_items_count %></div>
            <div class="text-sm text-gray-500">Cart Items</div>
          </div>
        </div>
      </div>

      <!-- Actions -->
      <div class="mt-8 pt-6 border-t border-gray-200">
        <h2 class="text-xl font-semibold mb-4">Actions</h2>
        <div class="flex space-x-4">
          <%= link_to "Edit User", edit_admin_user_path(@user), 
              class: "bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600" %>
          
          <% unless @user.verified? %>
            <%= button_to "Verify User", verify_admin_user_path(@user), 
                method: :patch, 
                class: "bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600" %>
          <% end %>
          
          <% if @user.active? %>
            <%= button_to "Suspend User", suspend_admin_user_path(@user), 
                method: :patch, 
                class: "bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600" %>
          <% elsif @user.suspended? %>
            <%= button_to "Activate User", activate_admin_user_path(@user), 
                method: :patch, 
                class: "bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600" %>
          <% end %>
          
          <% if @user.has_store? %>
            <%= link_to "View Store", admin_store_path(@user.store), 
                class: "bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600" %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
